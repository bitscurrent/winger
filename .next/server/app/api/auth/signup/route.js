"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},38508:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{POST:()=>c});var n=t(49303),i=t(88716),a=t(60670);t(11185);var o=t(42023),u=t.n(o),p=t(5929),d=t(18896);async function c(e){await (0,d.Z)();let{fullName:r,email:t,phone:s,password:n}=await e.json();if(!r||!t||!s||!n)return new Response(JSON.stringify({error:"All fields are required"}),{status:400});try{if(await p.Z.findOne({email:t}))return new Response(JSON.stringify({error:"Email already in use"}),{status:409});let e=await u().hash(n,10);return await p.Z.create({fullName:r,email:t,phone:s,password:e}),new Response(JSON.stringify({success:!0,message:"User registered successfully"}),{status:201})}catch(e){if(console.error(e),"ValidationError"===e.name)return new Response(JSON.stringify({error:e.message}),{status:400});return new Response(JSON.stringify({error:"Registration failed"}),{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/home/dilip/Desktop/winger/src/app/api/auth/signup/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=l,f="/api/auth/signup/route";function y(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},49303:(e,r,t)=>{e.exports=t(30517)},18896:(e,r,t)=>{t.d(r,{Z:()=>i});var s=t(11185),n=t.n(s);let i=async()=>{n().connection.readyState>=1||n().connect(process.env.MONGODB_URI,{}).then(()=>console.log("MongoDB connected")).catch(e=>console.error("MongoDB connection error:",e))}},5929:(e,r,t)=>{t.d(r,{Z:()=>a});var s=t(11185),n=t.n(s);let i=new(n()).Schema({fullName:{type:String,required:!0},email:{type:String,required:!0,unique:!0},phone:{type:String,required:!0},password:{type:String,required:!0},isAdmin:{type:Boolean,default:!1}},{timestamps:!0}),a=n().models.User||n().model("User",i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,23],()=>t(38508));module.exports=s})();